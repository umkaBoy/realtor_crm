webpackJsonp([1],{"1MmU":function(t,e){},"7zck":function(t,e){},B5dQ:function(t,e){},Icqr:function(t,e){},IsPh:function(t,e){},Ltkq:function(t,e){},NHJb:function(t,e){},NHnr:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("7+uW"),i=n("Dd8w"),a=n.n(i),s=n("NYxO"),o=n("sXC3"),c={name:"Menu",data:function(){return{icons:{mdiLogoutVariant:o.h,mdiCogs:o.e,mdiAccountHardHat:o.a,mdiDomain:o.f,mdiFloorPlan:o.g}}},computed:a()({},Object(s.b)("User",{user:"user"}),Object(s.b)("User",{username:"getFullName"}))},l={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-navigation-drawer",{staticStyle:{"z-index":"1000"},attrs:{permanent:"","expand-on-hover":"",color:"secondary"},scopedSlots:t._u([{key:"append",fn:function(){return[n("div",{staticClass:"pa-2"},[n("v-list",{attrs:{nav:"",dense:""}},[t.user&&t.user.is_superuser?n("v-list-item",{attrs:{link:"",href:"/admin",target:"_blank"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v(t._s(t.icons.mdiCogs))])],1),t._v(" "),n("v-list-item-title",[t._v("Админ-панель")])],1):t._e(),t._v(" "),n("v-list-item",{attrs:{link:"",href:"/logout"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v(t._s(t.icons.mdiLogoutVariant))])],1),t._v(" "),n("v-list-item-title",[t._v("Выход")])],1)],1)],1)]},proxy:!0}])},[n("v-list",[n("v-list-item",{staticClass:"px-2"},[n("v-list-item-avatar",[n("v-img",{attrs:{src:"https://png.pngtree.com/template/20191014/ourmid/pngtree-home-or-house-roof-logo-design-template-with-water-wave-image_317799.jpg"}})],1)],1),t._v(" "),n("v-list-item",{attrs:{link:"",to:"profile"}},[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[t._v("\n          "+t._s(t.username||"¯\\_(ツ)_/¯")+"\n        ")]),t._v(" "),n("v-list-item-subtitle",{staticClass:"primary--text"},[t._v(t._s(t.user.email))])],1)],1)],1),t._v(" "),n("v-divider"),t._v(" "),n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item",{attrs:{link:"",to:"/"}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v(t._s(t.icons.mdiFloorPlan))])],1),t._v(" "),n("v-list-item-title",[t._v("Лоты")])],1),t._v(" "),n("v-list-item",{attrs:{link:""}},[n("v-list-item-icon",[n("v-icon",{attrs:{color:"primary"}},[t._v(t._s(t.icons.mdiDomain))])],1),t._v(" "),n("v-list-item-title",[t._v("ЖК")])],1)],1)],1)},staticRenderFns:[]};var u=n("VU/8")(c,l,!1,function(t){n("PC5G")},"data-v-6c73f041",null).exports,d={name:"Alert",data:function(){return{icons:{info:o.c,error:o.d,warning:o.b}}},computed:a()({},Object(s.b)("Alert",{alerts:"all"}))},v={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"box"},[n("transition-group",{attrs:{name:"item",tag:"div"}},t._l(t.alerts,function(e){return n("v-alert",{key:e.id,staticClass:"item",staticStyle:{"background-color":"white !important"},attrs:{icon:t.icons[e.type],transition:"scroll-x-transition",outlined:"",prominent:"",border:"right",type:e.type}},[t._v("\n    "+t._s(e.text)+"\n    ")])}),1)],1)},staticRenderFns:[]};var m={name:"App",components:{"fc-menu":u,alerts:n("VU/8")(d,v,!1,function(t){n("B5dQ")},"data-v-305deba0",null).exports},computed:a()({},Object(s.b)("Page",{isLoading:"isLoading"}))},f={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-app",{attrs:{id:"app"}},[this.isLoading?e("v-progress-linear",{staticStyle:{"z-index":"10000"},attrs:{active:this.isLoading,indeterminate:this.isLoading,fixed:"",color:"blue accent-4"}}):this._e(),this._v(" "),e("fc-menu"),this._v(" "),e("router-view"),this._v(" "),e("alerts")],1)},staticRenderFns:[]};var h=n("VU/8")(m,f,!1,function(t){n("Icqr")},null,null).exports,p=n("/ocq"),g={render:function(){var t=this.$createElement;return(this._self._c||t)("v-container",{attrs:{align:"center"}},[this._v("\n  Здесь будет скоро профиль пользователя\n")])},staticRenderFns:[]};var _=n("VU/8")({name:"Profile"},g,!1,function(t){n("NHJb")},"data-v-2b562ea6",null).exports,y={render:function(){var t=this.$createElement,e=this._self._c||t;return e("v-container",[e("v-app-bar",{staticStyle:{"margin-left":"61px"},attrs:{app:"",dense:"",fixed:"",color:"secondary"}},[this._v("\n    здесь будет фильтрация\n  ")])],1)},staticRenderFns:[]};var w=n("VU/8")({name:"Header"},y,!1,function(t){n("IsPh")},"data-v-6e983018",null).exports,x={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-btn",{attrs:{fab:"",small:"",depressed:"",color:"transparent"}},[n("v-tooltip",{attrs:{right:""},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return e.attrs,[n("v-img",t._g({attrs:{src:t.link,width:"40",height:"40"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}],null,!0)},r))]}}])},[t._v(" "),n("v-img",{attrs:{src:t.link,width:"250",height:"auto"},scopedSlots:t._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])})],1)],1)],1)},staticRenderFns:[]};var b=n("VU/8")({name:"FCImage",props:["link"]},x,!1,function(t){n("1MmU")},"data-v-3ab0b486",null).exports,k=n("EbDR"),L={name:"Lots",components:{"fc-image":b,"mugen-scroll":n.n(k).a},data:function(){return{loading:!1,lots:Array(10).fill(Math.floor(Math.random()*Math.floor(1e4)))}},methods:{fetchData:function(){var t=this;this.loading=!0,this.lots=this.lots.concat(Array(10).fill(Math.floor(Math.random()*Math.floor(1e4)))),setTimeout(function(){t.loading=!1},500)}}},S={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",[n("v-virtual-scroll",{ref:"scroll",attrs:{bench:"50",items:t.lots,height:"92vh",width:"auto","item-height":"64"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item,i=e.index;return[n("v-list-item",{key:r},[n("v-list-item-action",[n("fc-image",{attrs:{link:"https://picsum.photos/200/300"}})],1),t._v(" "),n("v-list-item-content",[n("v-list-item-title",[t._v("\n            Лот "),n("strong",[t._v("ID "+t._s(r))])])],1)],1),t._v(" "),n("v-divider"),t._v(" "),i===t.lots.length-1?n("mugen-scroll",{attrs:{handler:t.fetchData,"should-handle":!t.loading,scrollContainer:"scroll"}},[t._v("\n        Загрузка...\n      ")]):t._e()]}}])})],1)},staticRenderFns:[]};var C={name:"Index",components:{"fc-header":w,lots:n("VU/8")(L,S,!1,function(t){n("Ltkq")},"data-v-59835f3a",null).exports},data:function(){return{complexes:Array(10).fill(Math.floor(Math.random()*Math.floor(1e4))),navigation:{width:"20vw",borderSize:3,shown:!0}}},mounted:function(){this.setBorderWidth(),this.setEvents()},methods:{setBorderWidth:function(){var t=this.$refs.drawer.$el.querySelector(".v-navigation-drawer__border");t.style.width=this.navigation.borderSize+"px",t.style.cursor="ew-resize",t.style.backgroundColor="lightgrey"},setEvents:function(){var t=this,e=this.navigation.borderSize,n=this.$refs.drawer.$el,r=n.querySelector(".v-navigation-drawer__border"),i=n.classList.contains("v-navigation-drawer--right")?"right":"left";function a(t){document.body.style.cursor="ew-resize";var e="right"===i?document.body.scrollWidth-t.clientX:t.clientX;n.style.width=e-61+"px"}r.addEventListener("mousedown",function(t){n.classList.add("unselectable"),t.offsetX<e&&(n.style.transition="initial",document.addEventListener("mousemove",a,!1))},!1),document.addEventListener("mouseup",function(){n.classList.remove("unselectable"),n.style.transition="",t.navigation.width=n.style.width,document.body.style.cursor="",document.removeEventListener("mousemove",a,!1)},!1)}}},U={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",{staticStyle:{"margin-left":"61px"}},[n("v-row",{staticStyle:{height:"93vh",width:"96vw"}},[n("v-col",{attrs:{cols:"12",sm:"12",md:"12"}},[n("fc-header")],1),t._v(" "),n("v-navigation-drawer",{ref:"drawer",attrs:{left:"",stateless:"",width:t.navigation.width},model:{value:t.navigation.shown,callback:function(e){t.$set(t.navigation,"shown",e)},expression:"navigation.shown"}},[n("v-virtual-scroll",{attrs:{bench:"50",items:t.complexes,height:"92vh",width:"auto","item-height":"64"},scopedSlots:t._u([{key:"default",fn:function(e){var r=e.item,i=e.index;return[n("v-list-item",{key:r},[n("v-list-item-content",[n("v-list-item-title",[n("a",{attrs:{href:"#"}},[t._v("ЖК "),n("strong",[t._v("№"+t._s(i))])]),t._v(" "),n("a",{staticClass:"float-right",attrs:{href:"#"}},[t._v("10 лотов")])])],1)],1),t._v(" "),n("v-divider")]}}])})],1),t._v(" "),n("v-navigation-drawer",{attrs:{stateless:"",width:"auto"},model:{value:t.navigation.shown,callback:function(e){t.$set(t.navigation,"shown",e)},expression:"navigation.shown"}},[n("lots")],1)],1)],1)},staticRenderFns:[]};var E=n("VU/8")(C,U,!1,function(t){n("iR+l")},"data-v-6dc73624",null).exports;r.default.use(p.a);var A=new p.a({routes:[{name:"profile",path:"/profile",component:_},{name:"index",path:"/",component:E}]}),F=0,M={namespaced:!0,state:{messages:[]},getters:{all:function(t){return t.messages}},mutations:{add:function(t,e){t.messages.push(e)},remove:function(t,e){t.messages=t.messages.filter(function(t){return t.id!==e})}},actions:{add:function(t,e){var n=t.commit,r=e.type,i=e.text,a=e.timeout,s=void 0===a?null:a,o=++F;n("add",{type:r,text:i,id:o}),s&&setTimeout(function(){n("remove",o)},s)}}},P=n("Xxa5"),$=n.n(P),R=n("exGp"),V=n.n(R),z=n("mtWM"),D=n.n(z);D.a.defaults.xsrfHeaderName="X-CSRFToken",D.a.defaults.auth={username:"test@mail.ru",password:"qwerty123"},D.a.defaults.xsrfCookieName="csrftoken";var N,j,q=D.a.create({baseURL:"/rest/",timeout:1e4}),H=(N=V()($.a.mark(function t(){var e,n;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,q.get("profile");case 2:return e=t.sent,n=e.data,t.abrupt("return",n);case 5:case"end":return t.stop()}},t,this)})),function(){return N.apply(this,arguments)}),I=(j=V()($.a.mark(function t(e){var n,r,i;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n={id:e},t.next=3,q.get("profile",{params:n});case 3:return r=t.sent,i=r.data,t.abrupt("return",i);case 6:case"end":return t.stop()}},t,this)})),{namespaced:!0,state:{user:{}},getters:{getFullName:function(t){return t.user&&t.user.first_name?(t.user.first_name+" "+t.user.last_name).replaceAll("undefined",""):""},user:function(t){return t.user},isAdmin:function(t){return t.user&&!!t.user.is_superuser},isStaff:function(t){return t.user&&!!t.user.is_staff}},mutations:{setUser:function(t,e){t.user=e}},actions:{load:function(t){var e=this,n=t.dispatch,r=t.commit;return V()($.a.mark(function t(){var i;return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n("Page/loading",{flag:!0},{root:!0}),t.prev=1,t.next=4,H();case 4:i=t.sent,r("setUser",i),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n("Alert/add",{type:"error",text:"Не удалось загрузить профиль",timeout:5e3},{root:!0});case 11:return t.prev=11,n("Page/loading",{flag:!1,timeout:300},{root:!0}),t.finish(11);case 14:case"end":return t.stop()}},t,e,[[1,8,11,14]])}))()}}}),O={namespaced:!0,state:{isLoading:!1,data:["1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17"]},getters:{isLoading:function(t){return t.isLoading},getData:function(t){return t.data}},mutations:{setLoader:function(t,e){t.isLoading=e},setData:function(t,e){t.data=e}},actions:{loading:function(t,e){var n=t.commit,r=e.flag,i=e.timeout;i?setTimeout(function(){n("setLoader",r)},i):n("setLoader",r)},load:function(t){var e=this,n=t.dispatch;t.commit;return V()($.a.mark(function t(){return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:n("Page/loading",{flag:!0},{root:!0});try{console.log("3")}catch(t){n("Alert/add",{type:"error",text:"Не удалось загрузить список объектов",timeout:5e3},{root:!0})}finally{n("Page/loading",{flag:!1,timeout:300},{root:!0})}case 2:case"end":return t.stop()}},t,e)}))()}}};r.default.use(s.a);var X=new s.a.Store({modules:{User:I,Alert:M,Page:O},strict:!1,state:{count:1},mutations:{increment:function(t,e){t.count+=e.counter}}}),T=(n("csSS"),n("3EgV")),W=n.n(T);r.default.use(W.a);var B=new W.a({theme:{themes:{light:{primary:"#005c89",secondary:"#edf2fa",accent:"#e7f5fe",error:"#b71c1c"}}},icons:{iconfont:"mdi"}});n("7zck");r.default.config.productionTip=!1,r.default.config.devtools=!0,X.dispatch("User/load"),new r.default({el:"#root",router:A,vuetify:B,store:X,template:"<App/>",components:{App:h}})},PC5G:function(t,e){},csSS:function(t,e){},"iR+l":function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.js.map